---
import Layout from '../layouts/Layout.astro';
import Header from '../components/landing/Header.astro';
import Footer from '../components/landing/Footer.astro';
import { getT, getLangFromCookies } from '../lib/i18n-astro';

const locale = getLangFromCookies(Astro.cookies);
const t = getT(locale);
const isLoggedIn = Astro.cookies.get('is_logged_in')?.value === 'true';
---

<Layout title={t('landing.pricing_title')}>
  <div class="min-h-screen flex flex-col">
    <Header />

    <main class="flex-grow">
      <section id="pricing" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center mb-16">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">{t('landing.pricing_title')}</h2>
            <p class="text-lg text-gray-600 max-w-xl mx-auto">{t('landing.pricing_subtitle')}</p>
          </div>

          <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
            <!-- Free / BYOK Tier -->
            <div class="p-8 rounded-2xl bg-gray-50 border border-gray-200 shadow-sm flex flex-col items-center text-center">
              <h3 class="text-2xl font-bold text-gray-900 mb-2">{t('landing.pricing_byok')}</h3>
              <p class="text-gray-500 mb-6 font-medium">{t('landing.pricing_byok_subtitle')}</p>
              <div class="text-4xl font-extrabold text-primary-600 mb-6">$0<span class="text-lg text-gray-500 font-medium">{t('landing.pricing_mo', '/mo')}</span></div>
              
              <ul class="text-left w-full space-y-4 mb-8">
                 <li class="flex items-start text-gray-700">
                  <svg class="h-6 w-6 text-green-500 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  <span>{t('landing.pricing_unlimited_jobs')}</span>
                </li>
                <li class="flex items-start text-gray-700">
                  <svg class="h-6 w-6 text-green-500 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  <span>{t('landing.pricing_own_billing')}</span>
                </li>
                <li class="flex items-start text-gray-500 text-sm mt-1 ml-8">
                  {t('landing.pricing_google_credit')}
                </li>
              </ul>
              
              {isLoggedIn ? (
                <a href="/dashboard" class="w-full py-4 px-6 bg-white border-2 border-primary-600 text-primary-700 rounded-xl font-bold hover:bg-primary-50 transition-colors mt-auto">
                  <span>{t('common.go_to_dashboard')}</span>
                </a>
              ) : (
                <a href="/register" class="w-full py-4 px-6 bg-white border-2 border-primary-600 text-primary-700 rounded-xl font-bold hover:bg-primary-50 transition-colors mt-auto">
                  <span>{t('landing.pricing_start_free')}</span>
                </a>
              )}
            </div>

            <!-- Managed / Paid Tier -->
            <div class="p-8 rounded-2xl bg-gradient-to-b from-primary-900 to-primary-800 text-white shadow-xl flex flex-col items-center text-center relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-primary-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg uppercase tracking-wider">
                {t('landing.pricing_turnkey')}
              </div>
              <h3 class="text-2xl font-bold mb-2">{t('landing.pricing_managed')}</h3>
              <p class="text-primary-200 mb-6 font-medium">{t('landing.pricing_managed_subtitle')}</p>
              <div class="text-4xl font-extrabold text-white mb-6">
                <span>{t('landing.pricing_managed_starts')}</span><span class="text-lg text-primary-300 font-medium">{t('landing.pricing_per_job', '/job')}</span>
              </div>
              
              <ul class="text-left w-full space-y-4 mb-8">
                 <li class="flex items-start text-primary-50">
                  <svg class="h-6 w-6 text-primary-400 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  <span>{t('landing.pricing_zero_setup')}</span>
                </li>
                 <li class="flex items-start text-primary-50">
                  <svg class="h-6 w-6 text-primary-400 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  <span>{t('landing.pricing_api_limits')}</span>
                </li>
                <li class="flex items-start text-primary-50 mt-1">
                   <svg class="h-6 w-6 text-primary-400 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  <span>{t('landing.pricing_subscriptions')}</span>
                </li>
              </ul>
              
              {isLoggedIn ? (
                <a href="/checkout" class="w-full py-4 px-6 bg-white text-primary-900 rounded-xl font-bold hover:bg-primary-50 transition-colors shadow-lg mt-auto">
                  <span>{t('landing.get_started')}</span>
                </a>
              ) : (
                <a href="/checkout" class="w-full py-4 px-6 bg-white text-primary-900 rounded-xl font-bold hover:bg-primary-50 transition-colors shadow-lg mt-auto">
                  <span>{t('landing.pricing_view_plans')}</span>
                </a>
              )}
            </div>
          </div>
        </div>
      </section>
    </main>

    <Footer />
  </div>
</Layout>
